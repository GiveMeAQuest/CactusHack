<html ng-app='app'>
	<head>
		<script type='text/ng-template' id='order.html'>
			<tr ng-click='showDetails=!showDetails'>
				<td>
					<b>Номер заказа: </b>{{order.id}}<br>
					<span class='order-body'>
						<table class='table table-bordered table-responsive table-condensed'>
							<tr ng-repeat='product in order.products'>
								<td>{{product.info.name}}</td>
								<td>{{product.info.cost}} грн/шт.</td>
								<td>{{product.count}} шт.</td>
							</tr>
						</table>
						Всего: <b>{{order.total}} грн</b>
					</span>
				</td>
				<td>{{$parent.getTime(order.order_time)}}</td>
				<td>{{$parent.getTime(order.prepare_time)}}
					<span ng-if='!expired'>(через {{timeLeft}})</span>
				</td>
			</tr>
		</script>
		<meta charset='utf-8' />
		<title>Happy Cake - заказы</title>
		<link rel='stylesheet' href='css/bootstrap.min.css' />
		<link rel='stylesheet' href='css/style.css' />
		<script src='js/jquery.min.js'></script>
		<script src='js/angular.min.js'></script>
		<script src='js/bootstrap.min.js'></script>
		<script src='js/main.js'></script>
		<script src='js/order.js'></script>
	</head>
	<body ng-controller='mainCtrl'>
		<div class='container'>
			<h1 class='text-center'>Happy Cake Online</h1>
			<div class='panel panel-default'>
				<div class='panel-heading'>
					<h3 class='text-center'>Заказы
						<span class='time pull-right'>{{curTime}}</span>
					</h3>
				</div>
				<table ng-if='orders.length>0' class='table table-responsive table-striped table-hover panel-body'>
					<tr>
						<th>Детали заказа</th>
						<th>Когда заказали</th>
						<th>Когда заберут</th>
					</tr>
					<tr order ng-repeat='order in orders' data='order' />
				</table>
				<div ng-if='loading' class='panel-body'>
				<h4 class='text-center'>Загрузка...</h4>
				</div>
				<div ng-if='!loading&&orders.length==0' class='panel-body'>
					<h4 class='text-center'>Невыполненных заказов нет</h4>
				</div>
			</div>
		</div>
	</body>
</html>